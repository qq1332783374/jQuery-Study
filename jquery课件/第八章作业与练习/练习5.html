<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="js/jquery-1.11.0.js" ></script>
		<style>
			*{margin: 0;padding: 0;}
			.box{
				width: 100px;
				height: 100px;
				background: blue;
				position: absolute;
				left: 0px;
				top: 0;
			}
			.round{
				width: 50px;
				height: 50px;
				border-radius: 50%;
				background: red;
				position: absolute;
				bottom: 0;
				left: 0;
			}
		</style>
	</head>
	<body>
		<div class="box">
			
		</div>
		
		<script>
			//上下左右控制盒子移动
			$(function(){
				var timer = null
			$(document).keydown(function(e){
				if(e.keyCode==39){
					var l = parseInt($(".box").css("left"))
					l = parseInt(l+10)
					if(l>$(window).width()-$(".box").width()){
						l = $(window).width()-$(".box").width()
					}
					$(".box").css("left",l)
				}else if(e.keyCode==37){
					var l = parseInt($(".box").css("left"))
					l = parseInt(l-10)
					if(l<0){
						l = 0
					}
					$(".box").css("left",l)
				}else if(e.keyCode==38){
					var t = parseInt($(".box").css("top"))
					t = parseInt(t-10)
					if(t<0){
						t = 0
					}
					$(".box").css("top",t)
				}else if(e.keyCode==40){
					var t = parseInt($(".box").css("top"))
					t = parseInt(t+10)
					if(t>$(window).height()-$(".box").height()){
						t = $(window).height()-$(".box").height()
					}
					$(".box").css("top",t)
				}
				//上38
				//右39
				//下40
				//左37	
			})
				var num = 0
				setInterval(function(){
					tab()
					var dom = tab()
					move(dom)
				},2000)
				function tab(){
						var dom = $('<div class="round"></div>')
						$("body").append(dom)
						dom.css({
							"background":"red"
						})
						return dom
				}

				function move(obj){
					var top = obj.offset().top
					var l = Math.random()*$(window).width()-obj.offset().left
					setInterval(function(){
						top--
//						console.log(l)
						obj.css({
							"top":top,
							"left":l
						})
						if(obj.offset().top==$(".box").offset().top+$(".box").height()){
							alert("游戏结束了")
						}else if(obj.offset().top==0){
							num++
							$(".box").html(num)
						}
					},10)	
				}
			})

		</script>
		
		
	</body>
</html>
